---
title: 'javascript 函数的理解（一）'
description: '函数声明、函数表达式'
sidebar: 'auto'
time: '2019-02-27'
tags: 'javascript'
prev: './js-this-keyword'
next: './js-clourse'
---

::: tip 概念
函数是第一类对象（first-class objects），或者说它们被称作一等公民（first-class citizens）。函数与对象共存，函数也可以被视为其他任意类型的JavaScript对象。函数和那些 更普通的JavaScript数据类型一样，它能被变量引用，能以字面量形式声明，甚至能被作为函数参数进行传递。<br />
对象能做的任何一件事，函数也都能做。函数也是对象，唯一的特殊之处在于它是可调用的（invokable），即函数会被调用以便执行某项动作。
:::

## 函数定义

+ 函数声明、函数表达式
+ 箭头函数
+ 函数构造函数
+ 生成器函数

## 函数声明、函数表达式两者存在细微的差别

+ 时机
    - 函数声明：创建的函数是在执行其他代码前定义的。
    - 函数表达式：是在运行阶段与其他代码一起执行的，因此在函数表达式所在的语句执行前，它创建的函数是未定义的。
+ 命名
    - 使用函数声明时，将创建一个与函数同名的变量，并让它指向函数。
    - 使用函数表达式时，通常不给函数指定名称，因此你要么在代码中将函数赋给一个变量，要么以其他方式使用函数表达式。
+ 幕后
    - 函数声明：它在创建函数的同时，还创建了一个用于创建函数引用的变量。
    - 函数表达式也创建函数，结果为一个引用，但如何使用它由你决定。

::: danger 总结
无论是使用函数声明还是函数表达式来定义函数，得到的都是指向这个函数的引用<br />
函数声明不返回指向函数的引用，而是创建一个与函数同名的变量，并将指向函数的引用赋给它。<br />
使用函数表达式时，你必须显式地将得到的引用赋给一个变量
:::

## 经典面试题

``` js
console.log(a) [1] // function a(){console.log(2)}
var a = function(){console.log(1)}; [2]
function a(){console.log(2)} [3]
console.log(a) [4] // function(){console.log(1)}
```

有上面的知识我们可以梳理一下这个流程，浏览器是怎么操作的？

+ 由于[1][2]不是函数声明所有跳过
+ [3]是函数声明，必须先对齐进行处理，在做其他事情
    - 浏览器创建相应的函数，将这个函数存储起来`就会创建一个与函数名一样的的变量来存储指向这个函数的引用`，以便能够在它被调用时获取它
    - 并将得到的函数引用赋给与函数同名的变量，这个函数名为`a` 因此创建一个名为`a`的变量来存储指向这个函数的引用
+ 处理完所有函数声明后，浏览器回到代码开头，开始从头到尾顺序执行代码
    - 代码开头是个简单的输出 `a`, 而这个`a`在执行之前已被处理成一个指向函数的引用的变量，所以输出了`function a(){console.log(2)}`
    - 接下来，遇到另一个变量`a`,我来创建这个变量。在这条语句的右边，是一个函数表达式。我将这个函数存储起来，以便能够在其被调用时获取它。由于这是一个函数表达式， 我需要创建一个指向这个新函数的引用。现在，我只需将这个函数引用赋给变量`a` 即可
    - 因变量名相同，上一个变量值被下一个覆盖,[4]输出`function(){console.log(1)}`

## 为什么this参数表示函数上下文

当调用函数时，除了显式提供的参数外，this参数也会默认地传递给函数。this参数是面向对象JavaScript编程的一个重要组成部分，代表函数调用相关联的对象。因此，通常称之为函数上下文。<br/>
函数上下文是来自面向对象语言（如Java）的一个概念。在这些语 言中，this通常指向定义当前方法的类的实例。 <br/>
在JavaScript中，将一个函数作 为方法（method）调用仅仅是函数调用的一种方式。事实上，this参数 的指向不仅是由定义函数的方式和位置决定的，同时还严重受到函数调 用方式的影响

## 参考

+ HEAD FIRST JAVASCRIPT：
+ js忍者秘籍：
