---
title: ajax的一些事
date: 2018-04-23 09:56:14
tags: javascript
---

> js 是单线程语言

``` tip

JS运行在浏览器中，是单线程的，每个进程一个JS线程，
既然是单线程的，在某个特定的时刻只有特定的代码能够被执行，并阻塞其它的代码(其他任务都必须在后面排队等待)

单线程模型带来了一些问题，主要是新的任务被加在队列的尾部，只有前面的所有任务运行结束，才会轮到它执行。
如果有一个任务特别耗时，后面的任务都会停在那里等待，造成浏览器失去响应，又称“假死”
JavaScript语言的设计者意识到，这时CPU完全可以不管IO设备，挂起处于等待中的任务，先运行排在后面的任务。等到IO设备返回了结果，再回过头，把挂起的任务继续执行下去。
这种机制就是JavaScript内部采用的Event Loop。

```

> js 调用栈 (call stack)

``` tip

调用栈是一种栈结构,它用来存储计算机程序执行时候其活跃子程序的信息。

调用栈其实就是一种解析器去处理程序的机制，它是栈数据结构。它能追踪子程序的运行状态。
（1）当脚本要调用一个函数时，解析器把该函数添加到栈中并且执行这个函数。并形成一个栈帧
（2）任何被这个函数调用的函数会进一步添加到调用栈中，形成另一个栈帧,并且运行到它们被上个程序调用的位置。
（3）当执行完这个函数后，如果它没有调用其他函数，则它会从调用栈中推出。然后调用栈继续运行其他部门。
（4) 异步函数的回调函数一般都会被添加到运行队列里面，如settimeout会在响应的时间后把回调函数放入队列中，队列里的函数需要等栈为空时才会被推入栈中执行。如果队列中有其他函数，需要等队列前面的函数被堆入调用栈中之后才会运行。

```

> 任务队列 task queue
>>同步任务（synchronous）同步任务指的是，在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务
>>异步任务（asynchronous）异步任务指的是，不进入主线程、而进入"任务队列"（task queue）的任务，只有"任务队列"通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行

所有同步任务都在主线程上执行，形成一个执行栈（execution context stack）。