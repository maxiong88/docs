---
title: lineHeightverticalAlign伪垂直居中
date: 2018-03-16 16:13:10
tags: css世界
---


为什么来写这边文章，是因为我们老大在群里说一句：

`vertical-align: baseline; 这个baseline的具体位置是什么，有谁比较了解; 还有就是一朋友问我vertical-align与line-height关系`

表示一脸的懵逼，不知道在说什么；

<!-- more -->


### 为什么line-height可以让内联元素“垂直居中”

坊间流传着这么一种说法：“要想让单行文字垂直居中，只要设置 line-height 大小和 height高度一样就可以了。”类似下面这样的代码： 


	.title {   height: 24px;   line-height: 24px; }
	
从效果上看，似乎验证了这种说法的正确性。但是，实际上，上面的说法对 CSS 初学者会产生 两个严重的误导，同时，语句本身也存在不严谨的地方!
误区之一：要让单行文字垂直居中，只需要line-height这一个属性就可以，与height 一点儿关系都没有。也就是说，我们直接： 

	.title {   line-height: 24px; } 
	
就可以了。坊间传闻的说法会误导大小一定要同时设置height属性才可以。 

误区二：行高控制文字垂直居中，不仅适用于单行，多行也是可以的。准确的说法应该是 “line-height 可以让单行或多行元素近似垂直居中”。
稍等，这里有个词似乎和上面的表述 有点儿微妙的差异，“近似垂直居中”？没错，一定要加上“近似”二字，这样的说法才足够严 谨。
换句话说，我们通过line-height设置的垂直居中，并不是真正意义上的垂直居中！究 竟是怎么一回事？ 

这里，其实要解答的是两个问题，一个是为何可以“垂直居中”，另一个是为何是“近似”.

行高可以实现“垂直居中”原因在于 CSS 中“行 距的上下等分机制”，如果行距的添加规则(`单一`)是在文字的上方或者下方，则行高是无法让文字垂直 居中的。 

说“近似”是因为文字字形的垂直中线位置普遍要比真正的“行框盒子”的垂直中线位置 低，譬如我们拿现在用得比较多的微软雅黑字体举例： 

	p {   font-size: 80px;   line-height: 120px;   background-color: #666;   font-family: 'microsoft yahei';   color: #fff; } 
	<p>微软雅黑</p>
	
结果，我都不需要标注，肉眼就能看出字形明显偏下:

![字体上方比下方大](../css/images/20180316-1.png)

由于我们平时使用的font-size都比较小，12px～16px很多，因此，虽然微软雅黑字 体有下沉，但也就 1 像素的样子，
所以我们往往觉察不到 这种“垂直对齐”其实并不是真正意义上的垂直居中，只 是感官上看上去像是垂直居中罢了。
这也是我总是称 line-height 实现的单行文本垂直居中为“近似垂直居 中”的原因。

多行文本或者替换元素的垂直居中实现原理和单行文本就不一样了，需要 line-height 属性的好朋友vertical-align属性帮助才可以（此处不再做参考）

	.box {   line-height: 120px;   background-color: #f0f3f9; } 
	.content {   display: inline-block;   line-height: 20px;   margin: 0 20px;   vertical-align: middle; } 
	<div class="box">   
		<div class="content">基于行高实现的...</div> 
	</div> 

说一下实现原理：

（1）多行文字使用一个标签包裹，然后设置display为inline-block。
好处在于既能 重置外部的 line-height 为正常的大小，又能保持内联元素特性，从而可以设置 vertical-align属性，以及产生一个非常关键的“行框盒子”。
我们需要的其实并不是这个 “行框盒子”，而是每个“行框盒子”都会附带的一个产物—“幽灵空白节点”，即一个宽度为 0、表现如同普通字符的看不见的“节点”。
有了这个“幽灵空白节点”，我们的 line- height:120px 就有了作用的对象，从而相当于在.content 元素前面撑起了一个高度为 120px的宽度为0的内联元素。 

（2）因为内联元素默认都是基线对齐的，所以我们通过对.content元素设置vertical- align:middle来调整多行文本的垂直位置，
从而实现我们想要的“垂直居中”效果。如果是 要借助line-height实现图片垂直居中效果，也是类似的原理和做法。 细心的读者可能发现，
上面我解释原理的时候，“垂直居中”这 4 个字加了引号，莫非， 这里的“垂直居中”又是“近似”？ 你还真说对了，
这里实现的“垂直居中”确实也不是真正意义上的垂直居中，也是“近似 垂直居中”。
还是上面的多行文本垂直居中的例子，如果我们捕获到多行文本元素的尺寸空间， 
截个图，然后通过尺子工具一量就会发现，上面的留空是 41px，下面的留空是39px，对啦，原来不是完全的垂直居 中，


![字体上方比下方大](../css/images/20180316-1.png)

`不垂直居中与line-height无关，而是vertical- align导致的`

###  line-height 的好朋友 vertical-align 

话有点多了直接上干货

	.box { line-height: 32px; } 
	.box > span { font-size: 24px; } 
	<div class="box">   
	<span>文字</span> 
	</div>
	
.box元素的高度是多少？ 
很多人一定认为是32px：因为没有设置height等属性，高度就由line-height决定， 与font-size无关，所以这里明摆着终高度就是32px。 
但是事实上，高度并不是 32px，而是要大那么几像素（受不同字体影响，增加高度也不一样），比方说35px。
这里，之所以终.box元素的高度并不等于line-height，就 是因为行高的朋友属性vertical-align在背后默默地下了黑手。 
vertical-align 知识点比 line-height 要多，
我们现在就 来一点一点地揭开vertical-align属性的层层面纱。（`这里主要是说vertical-align：middle近似垂直居中的问题`）


• 内联元素：元素的垂直中心点和行框盒子基线往上 1/2 x-height处对齐。
• table-cell元素：单元格填充盒子相对于外面的表格行居中对齐。 
 
table-cell 元素的 vertial-align:middle 中规中矩，没什么好说的
 
倒是内联元素的vertial-align:middle有很多说不完的故事。

定义中“基线往上 1/2 x-height处”， 指的就是 middle 的位置，仔细品味一下，“基线”就是字符 x 底边缘，而 x-height 就是字符 x 的高度。
考虑到大部分字体的字符 x 上下是等分的，因此，从“基线往上 1/2x-height 处”我们就可以看出是字符 x 中心交叉点的位置。
换句话说就是，vertial-align:middle 可以让内联元素的真正意义上的垂直中心位置和字符 x 的交叉点对齐。

基本上所有的字体中，字符 x 的位置(相对于盒子的中心线)都是偏下一点儿的，font-size 越大偏移越明显， 
这才导致默认状态下的vertial-align:middle实现的都是“近似垂直居中”。 

演示页面有两条水平线，其中，图片上线显示的是图片垂直中心位置，而贯穿整个容器的线就是容器的垂直中心位置，可以看到，默认状态下，两根线就不在一个水平线
因为图片上的那根线趋向于和字符 x 的中心靠近，而不是容器的垂直中心。如果我们把 font-size改大，如48px，则效果更加明显

点击后面链接进入页面查看 [两条垂直中心线示意 ](../css/images/5-3-8.html)

![前面两个后面两个个，后面设置font-size:0; ](../css/images/20180316185833.png)

如果想要实现真正意义上的垂直居中对齐，只要想办法让字符 x 的中心位置就是容器的垂直中心位置(蓝色线)即可，

#### 方法

* 设置 font-size:0，整个字符 x 缩小成了一个看不见的点， 根据line-height的半行间距上下等分规则，这个点就正 好是整个容器的垂直中心位置，这样就可以实现真正意义上 的垂直居中对齐了。
* 使用vertical-align的数值百分比类，手动去设置该值，优点：一、兼容性好；二、可以精准控制内联元素的垂直对齐位置


以上摘自 《css世界》
 
 


